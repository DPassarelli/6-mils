/* eslint-env mocha */

/**
 * Code under test.
 * @type {any}
 */
const T = require('./index.js')

describe('the "format-xml" module', function () {
  it('must export a function', function () {
    const expected = 'function'
    const actual = typeof T
    expect(actual).to.equal(expected)
  })

  describe('the exported function', function () {
    it('must properly format a valid cXML document with matching opening and closing tags', function () {
      const expected = `<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE cXML SYSTEM "http://xml.cxml.org/schemas/cXML/1.2.014/cXML.dtd">
<cXML xml:lang="en-US" payloadID="933694607739" timestamp="2002-08-15T08:46:00-07:00">
  <Response>
    <Status code="200" text="success"></Status>
    <PunchOutSetupResponse>
      <StartPage>
        <URL>http://xml.workchairs.com/retrieve?reqUrl=20626;Initial=TRUE</URL>
      </StartPage>
    </PunchOutSetupResponse>
  </Response>
</cXML>`

      const actual = T('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE cXML SYSTEM "http://xml.cxml.org/schemas/cXML/1.2.014/cXML.dtd"><cXML xml:lang="en-US" payloadID="933694607739" timestamp="2002-08-15T08:46:00-07:00"><Response><Status code="200" text="success"></Status><PunchOutSetupResponse><StartPage><URL>http://xml.workchairs.com/retrieve?reqUrl=20626;Initial=TRUE</URL></StartPage></PunchOutSetupResponse></Response></cXML>')

      expect(actual).to.equal(expected)
    })

    it('must properly format a valid cXML document with collapsed empty tags', function () {
      const expected = `<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE cXML SYSTEM "http://xml.cxml.org/schemas/cXML/1.2.014/cXML.dtd">
<cXML xml:lang="en-US" payloadID="933694607739" timestamp="2002-08-15T08:46:00-07:00">
  <Response>
    <Status code="200" text="success"/>
    <PunchOutSetupResponse>
      <StartPage>
        <URL>http://xml.workchairs.com/retrieve?reqUrl=20626;Initial=TRUE</URL>
      </StartPage>
    </PunchOutSetupResponse>
  </Response>
</cXML>`

      const actual = T('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE cXML SYSTEM "http://xml.cxml.org/schemas/cXML/1.2.014/cXML.dtd"><cXML xml:lang="en-US" payloadID="933694607739" timestamp="2002-08-15T08:46:00-07:00"><Response><Status code="200" text="success"/><PunchOutSetupResponse><StartPage><URL>http://xml.workchairs.com/retrieve?reqUrl=20626;Initial=TRUE</URL></StartPage></PunchOutSetupResponse></Response></cXML>')

      expect(actual).to.equal(expected)
    })
  })
})
